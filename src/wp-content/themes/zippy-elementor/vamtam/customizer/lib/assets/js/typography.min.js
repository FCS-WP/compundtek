((r,s)=>{wp.customize.controlConstructor["vamtam-typography"]=wp.customize.Control.extend({ready:function(){function e(t,e){var a,n=r(c),e=e||n.val();n.empty();let o;for(a in VAMTAM_ALL_FONTS){var i,s=VAMTAM_ALL_FONTS[a];if(t===(o=s).family){for(var l of s.weights)isNaN(l)&&"bold"!==l&&"normal"!==l||((i=r("<option>")).text(l),n.append(i));break}}o&&(-1<o.weights.indexOf(e)?n.val(e):n.val(-1<o.weights.indexOf("normal")?"normal":o.weights[0]))}function t(t){return r("<span style=\"font-family:'"+t.text+"';\">"+t.text+"</span>")}var a,n=this,o=n.selector+" .font-family select",c=n.selector+" .font-weight select",i={};_.each(n.params.default,function(t,e){!1!==t&&(i[e]=t,n.params.value[e]!==n.setting._value[e]&&n.params.value.hasOwnProperty(e)&&(n.setting._value[e]=n.params.value[e]),s!==n.setting._value[e])&&(i[e]=n.setting._value[e])}),_.each(n.setting._value,function(t,e){s!==i[e]&&void 0!==i[e]||(i[e]=t)}),r(o).val(n.setting._value["font-family"]);r(o).vamtamSelect2({dropdownParent:r(n.selector+" .font-family"),templateResult:t,templateSelection:t}),VAMTAM_CUSTOMIZER.controls.addSelectiveFontLoadingToSelect2(this,r(o)),e(i["font-family"],i["font-weight"]),this.container.on("change",".font-family select",function(){var t=r(this).val();t&&(i["font-family"]=t,n.saveValue(i),e(t,null),r(this).css("font-family",i["font-family"]))}),VAMTAM_CUSTOMIZER.controls.addSelectsChangeHandlers(this,i),VAMTAM_CUSTOMIZER.controls.addInputsChangeHandlers(this,i),VAMTAM_CUSTOMIZER.controls.addUnitHandlers(this,i),VAMTAM_CUSTOMIZER.controls.addRespBtnHandlers(this,i),(a=this.container.find(".vamtam-color-picker")).wpColorPicker({change:function(){setTimeout(function(){i.color=a.val(),n.saveValue(i)},100)}}),VAMTAM_CUSTOMIZER.controls.updateDummyProp(i),n.saveValue(i),setTimeout(()=>{wp.customize.state("saved").set(!0)},1)},saveValue:function(t){var a={};_.each(t,function(t,e){a[e]=t}),this.setting.set(a)}}),r(document).on("ready",function(){wp.customize.previewedDevice.bind(function(t){r(".resp-btns [data-device="+("mobile"===t?"phone":t)+"]").each(function(t,e){r(e).click()})})})})(jQuery);